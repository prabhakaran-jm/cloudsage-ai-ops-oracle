# Netlify configuration for CloudSage frontend (Next.js in monorepo)
[build]
  # Base directory - Netlify will cd into this directory before building
  base = "apps/web"
  
  # Build command - npm install runs automatically, just build
  command = "npm install --legacy-peer-deps && npm run build"
  
  # Publish directory (relative to base directory)
  publish = ".next"

  # Node version
  [build.environment]
    NODE_VERSION = "20"
    NPM_FLAGS = "--legacy-peer-deps"

# Next.js plugin - handles standalone output, serverless functions, and routing
[[plugins]]
  package = "@netlify/plugin-nextjs"

# Environment variables should be set in Netlify Dashboard:
# NEXT_PUBLIC_API_URL = https://cloudsage-api.01kbv4q1d3d0twvhykd210v58w.lmapp.run/api

