# Netlify configuration for CloudSage frontend
[build]
  # Base directory - Netlify will cd into this directory before building
  base = "apps/web"
  
  # Build command - ensure dependencies are installed first
  command = "npm install && npm run build"
  
  # Publish directory (relative to base directory)
  # For Next.js standalone output, use .next/standalone or just .next
  publish = ".next"

# Next.js plugin for optimal builds
[[plugins]]
  package = "@netlify/plugin-nextjs"
  
# Ensure Next.js dependencies are included
[build.environment]
  NODE_VERSION = "22.21.1"
  NPM_FLAGS = "--legacy-peer-deps"

# Environment variables should be set in Netlify Dashboard:
# NEXT_PUBLIC_API_URL = https://cloudsage-api.01k844rvnc9e5n807arvr4wn0t.lmapp.run/api

